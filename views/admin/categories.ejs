<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= title %></title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    @keyframes pulseGlow {
      0% {
        box-shadow: 0 0 0 rgba(79, 70, 229, 0);
      }
      50% {
        box-shadow: 0 0 12px rgba(79, 70, 229, 0.4);
      }
      100% {
        box-shadow: 0 0 0 rgba(79, 70, 229, 0);
      }
    }

    @keyframes bounceMini {
      0% {
        transform: scale(1);
      }
      30% {
        transform: scale(1.15);
      }
      60% {
        transform: scale(0.95);
      }
      100% {
        transform: scale(1);
      }
    }

    .views-animate {
      background-color: rgb(238, 242, 255); /* indigo-50 */
      color: rgb(67, 56, 202); /* indigo-700 */
      animation: pulseGlow 0.6s ease-out;
    }

    .icon-animate {
      animation: bounceMini 0.4s ease-out;
      color: rgb(79, 70, 229); /* indigo-600 */
    }
  </style>

  <!-- Icons (Font Awesome CDN for now) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  />

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
  <style>
    .stat-card {
      @apply bg-white rounded-xl shadow p-6;
    }

    .stat-label {
      @apply text-sm text-gray-500;
    }

    .stat-value {
      @apply text-2xl font-semibold text-gray-800 mt-1;
    }

    .btn-primary {
      @apply px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700;
    }

    .btn-sm {
      @apply px-3 py-1 bg-indigo-50 text-indigo-600 rounded text-xs hover:bg-indigo-100;
    }
  </style>
  <style>
    @keyframes toast-in {
      from {
        opacity: 0;
        transform: translateX(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    @keyframes toast-out {
      from {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
      to {
        opacity: 0;
        transform: translateX(30px) scale(0.95);
      }
    }

    .animate-toast-in {
      animation: toast-in 0.45s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .animate-toast-out {
      animation: toast-out 0.4s ease-in forwards;
    }
  </style>

  <style>
    @keyframes pulseGlow {
      0% {
        box-shadow: 0 0 0 rgba(79, 70, 229, 0);
      }
      50% {
        box-shadow: 0 0 12px rgba(79, 70, 229, 0.4);
      }
      100% {
        box-shadow: 0 0 0 rgba(79, 70, 229, 0);
      }
    }

    @keyframes bounceMini {
      0% {
        transform: scale(1);
      }
      30% {
        transform: scale(1.15);
      }
      60% {
        transform: scale(0.95);
      }
      100% {
        transform: scale(1);
      }
    }

    .views-animate {
      background-color: rgb(238, 242, 255); /* indigo-50 */
      color: rgb(67, 56, 202); /* indigo-700 */
      animation: pulseGlow 0.6s ease-out;
    }

    .icon-animate {
      animation: bounceMini 0.4s ease-out;
      color: rgb(79, 70, 229); /* indigo-600 */
    }
    @keyframes pop {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.3);
      }
      100% {
        transform: scale(1);
      }
    }
    .animate-like {
      animation: pop 0.25s ease;
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />
</head>



  <body class="bg-gray-100 min-h-screen">
    <!-- TOAST START -->
    <!-- TOAST CONTAINER -->
<div
  id="toast-container"
  class="fixed top-6 right-6 z-[9999] space-y-4"
>

  <!-- SUCCESS -->
  <% if (success?.length) { %>
    <div
      class="toast relative min-w-[340px] overflow-hidden rounded-xl
             bg-emerald-50/90 backdrop-blur
             shadow-[0_10px_30px_rgba(0,0,0,0.12)]
             border border-emerald-100 animate-toast-in"
    >
      <!-- Accent Bar -->
      <div class="absolute left-0 top-0 h-full w-1 bg-emerald-500"></div>

      <!-- Content -->
      <div class="flex items-start gap-3 px-5 py-4">
        <p class="text-sm font-medium text-emerald-900">
          <%= success[0] %>
        </p>
      </div>

      <!-- Inner Glow -->
      <div class="absolute inset-0 ring-1 ring-inset ring-white/40 pointer-events-none"></div>
    </div>
  <% } %>

  <!-- ERROR -->
  <% if (error?.length) { %>
    <div
      class="toast relative min-w-[340px] overflow-hidden rounded-xl
             bg-rose-50/90 backdrop-blur
             shadow-[0_10px_30px_rgba(0,0,0,0.12)]
             border border-rose-100 animate-toast-in"
    >
      <div class="absolute left-0 top-0 h-full w-1 bg-rose-500"></div>

      <div class="flex items-start gap-3 px-5 py-4">
        <p class="text-sm font-medium text-rose-900">
          <%= error[0] %>
        </p>
      </div>

      <div class="absolute inset-0 ring-1 ring-inset ring-white/40 pointer-events-none"></div>
    </div>
  <% } %>

  <!-- INFO -->
  <% if (info?.length) { %>
    <div
      class="toast relative min-w-[340px] overflow-hidden rounded-xl
             bg-indigo-50/90 backdrop-blur
             shadow-[0_10px_30px_rgba(0,0,0,0.12)]
             border border-indigo-100 animate-toast-in"
    >
      <div class="absolute left-0 top-0 h-full w-1 bg-indigo-500"></div>

      <div class="flex items-start gap-3 px-5 py-4">
        <p class="text-sm font-medium text-indigo-900">
          <%= info[0] %>
        </p>
      </div>

      <div class="absolute inset-0 ring-1 ring-inset ring-white/40 pointer-events-none"></div>
    </div>
  <% } %>

</div>


<!-- WRAPPER -->
    <div class="flex min-h-screen">
      <!-- SIDEBAR  START -->
  <aside class="w-64 bg-white shadow-lg flex flex-col justify-between">
  <div class="p-6 border-b">
    <h1 class="text-2xl font-bold text-indigo-600"><%= pageTitle %></h1>
  </div>

  <nav class="flex-1 px-4 py-6 space-y-2">
    <a
      href="/admins/dashboard"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/dashboard' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Dashboard
    </a>

    <a
      href="/admins/profile"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/profile' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Manage Profile
    </a>
    
    <a
      href="/admins/users"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/users' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Manage Users
    </a>

    <a
      href="/admins/categories"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/categories' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Manage Categories
    </a>

    <a
      href="/admins/blogs"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/blogs' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Manage Blogs
    </a>

    <a
      href="/admins/comments"
      class="block px-4 py-2 rounded-lg transition <%= currentPath === '/admins/comments' ? 'bg-indigo-100 text-indigo-700 font-semibold border-l-4 border-indigo-600' : 'text-gray-700 hover:bg-indigo-50 hover:text-indigo-600' %>"
    >
      Manage Comments
    </a>
  </nav>

  <div class="p-4 border-t flex items-center justify-between gap-3">
    <div class="flex items-center gap-3">
      <div class="relative">
        <img
          src="<%= admin.avatarUrl.url || 'https://ui-avatars.com/api/?name=' + admin.username + '&background=0D8ABC&color=fff' %>"
          class="w-10 h-10 rounded-full object-cover border"
        />
        <span
          class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"
        ></span>
      </div>

      <div class="leading-tight">
        <p class="text-sm font-semibold"><%= admin.username %></p>
        <p class="text-xs text-gray-500 truncate max-w-[140px]">
          <%= admin.email.slice(0, 10).concat("...") %>
        </p>
        <span class="inline-block mt-1 text-xs bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded">
          <%= admin.role %>
        </span>
      </div>
    </div>

    <form action="/admins/auth/logout" method="POST">
      <button
        type="submit"
        class="text-red-500 hover:text-red-700 text-sm font-medium bg-red-100 px-3 py-1 rounded"
      >
        Logout
      </button>
    </form>
  </div>
</aside>



      <!-- MAIN AREA -->
<div class="flex-1 flex flex-col">
        <!-- TOP BAR -->
<header class="bg-white border-b px-6 py-4 flex justify-between items-center">
  <!-- LEFT -->
  <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-3">
    <span class="rounded-full bg-indigo-50 px-4 py-1 text-sm font-semibold text-indigo-700">
      <%= admin.username.toUpperCase() %>
    </span>
    <%= pageTitle %>
  </h2>

  <!-- RIGHT -->
  <div class="flex items-center gap-5">

    <!-- ‚¨Ö Back Button -->
<button
  id="backBtn"
  type="button"
  class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 bg-gray-100 px-3 py-2 rounded-lg hover:bg-gray-200 transition"
>
  <i class="fa-solid fa-arrow-left"></i>
  Back
</button>


    <!-- üîî Notifications -->
    <div class="relative">
      <button
        id="notification-bell"
        type="button"
        class="relative p-2 rounded-full hover:bg-gray-100 transition text-gray-600 hover:text-gray-900"
      >
        <i class="fa-regular fa-bell text-lg"></i>

        <% if ((totalUnreadNotifications || 0)) { %>
          <span
            id="notification-badge"
            class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-5 h-5 flex items-center justify-center rounded-full font-medium"
          >
            <%= totalUnreadNotifications %>
          </span>
        <% } %>
      </button>

      <!-- DROPDOWN -->
<div
  id="notification-dropdown"
  class="hidden absolute right-0 mt-3 w-96 bg-white border rounded-xl shadow-xl z-50 overflow-hidden"
>
  <!-- HEADER -->
  <div class="px-4 py-3 border-b flex items-center justify-between">
    <h4 class="text-sm font-semibold text-gray-700">
      Notifications
    </h4>
    <span class="text-xs text-gray-500">
  <%= totalUnreadNotifications %> unread ‚Ä¢ <%= totalNotifications %> total
</span>
  </div>

  <!-- LIST -->
  <div id="notification-list" class="max-h-[360px] overflow-y-auto">
    <% if (notifications?.length) { %>

      <% notifications.forEach(n => { %>
        <a
          href="#"
          data-id="<%= n._id %>"
  data-read="<%= n.isRead %>"
          class="
    notification-item
    relative flex gap-3 px-4 py-3 border-b text-sm transition
    <%= n.isRead ? 'hover:bg-gray-50' : 'bg-indigo-50/60 hover:bg-indigo-50' %>
  "
        >
          <!-- LEFT ACCENT FOR UNREAD -->
          <% if (!n.isRead) { %>
            <span class="absolute left-0 top-0 h-full w-1 bg-indigo-500"></span>
          <% } %>

          <!-- ICON -->
          <div class="mt-1 text-indigo-600 shrink-0">
            <i class="fa-solid fa-circle-info"></i>
          </div>

          <!-- CONTENT -->
          <div class="flex-1">
            <p
              class="
                leading-relaxed
                <%= n.isRead ? 'text-gray-700' : 'text-gray-900 font-medium' %>
              "
            >
              <%= n.message %>
            </p>

            <span class="text-xs text-gray-400">
              <%= new Date(n.createdAt).toLocaleString() %>
            </span>
          </div>

          <!-- UNREAD DOT -->
          <% if (!n.isRead) { %>
            <span class="mt-2 w-2 h-2 bg-indigo-500 rounded-full"></span>
          <% } %>
        </a>
      <% }) %>

      <!-- READ MORE -->
      <% if (totalNotifications > notifications.length) { %>
        <a
          href="/admins/notifications"
          class="block px-4 py-3 text-center text-sm font-medium text-indigo-600 hover:bg-indigo-50 transition"
        >
          Read more ‚Üí
        </a>
      <% } %>

    <% } else { %>

      <!-- EMPTY STATE -->
      <div class="px-6 py-8 text-center text-sm text-gray-500">
        <i class="fa-regular fa-bell-slash text-2xl mb-2 text-gray-400"></i>
        <p>No new notifications</p>
      </div>

    <% } %>
  </div>
</div>

    </div>

    <!-- üö™ Logout -->
    <form action="/admins/auth/logout" method="POST">
      <button
        type="submit"
        class="flex items-center gap-2 text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg hover:bg-red-100 transition"
      >
        <i class="fa-solid fa-right-from-bracket"></i>
        Logout
      </button>
    </form>

  </div>
</header>


        <!-- MAIN CONTENT -->
<!-- MAIN CONTENT -->
<main class="flex-1 p-6 space-y-6">

  <!-- PAGE HEADER -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-semibold text-gray-800">Category Management</h2>
      <p class="text-sm text-gray-500">
        Create, update and organize your blog categories
      </p>
    </div>

    <!-- CREATE CATEGORY BUTTON -->
    <button
  data-open-modal="create-category"
  class="bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-sm font-medium shadow
         hover:bg-indigo-700 transition flex items-center gap-2"
>
  <i class="fa-solid fa-plus"></i>
  New Category
</button>

  </div>

  <!-- CATEGORY TABLE CARD -->
  <div class="bg-white rounded-2xl shadow border overflow-hidden">

    <!-- TABLE -->
    <table class="w-full text-sm">
      <thead class="bg-gray-50 text-gray-600">
        <tr>
          <th class="px-6 py-4 text-left font-medium">Category Name</th>
          <th class="px-6 py-4 text-left font-medium">Slug</th>
          <th class="px-6 py-4 text-left font-medium">CreatedBy</th>
          <th class="px-6 py-4 text-left font-medium">Total Blogs</th>
          <th class="px-6 py-4 text-left font-medium">Created At</th>
          <th class="px-6 py-4 text-right font-medium">Actions</th>
        </tr>
      </thead>

      <tbody class="divide-y">

  <% if (!categories.docs || categories.docs.length === 0) { %>

    <!-- EMPTY STATE -->
    <tr>
      <td colspan="4" class="px-6 py-16 text-center">
        <div class="flex flex-col items-center gap-3">

          <!-- ICON -->
          <div class="w-14 h-14 flex items-center justify-center rounded-full bg-indigo-50 text-indigo-600">
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="w-7 h-7"
                 fill="none"
                 viewBox="0 0 24 24"
                 stroke="currentColor">
              <path stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
            </svg>
          </div>

          <!-- TEXT -->
          <h3 class="text-lg font-semibold text-gray-800">
            No categories yet
          </h3>

          <p class="text-sm text-gray-500 max-w-md">
            You haven‚Äôt created any categories. Categories help organize your blogs and
            improve discoverability.
          </p>

          <!-- CTA -->
              <button
  data-open-modal="create-category"
  class="bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-sm font-medium shadow
         hover:bg-indigo-700 transition flex items-center gap-2"
>
  <i class="fa-solid fa-plus"></i>
  Create new category now
</button>

        </div>
      </td>
    </tr>

  <% } else { %>

    <!-- NORMAL LIST -->
    <% categories.docs.forEach(cat => { %>
  <tr class="hover:bg-gray-50 transition">
    
    <!-- Name -->
    <td class="px-6 py-4 font-medium text-gray-800">
      <%= cat.name %>
    </td>

    <!-- Slug -->
    <td class="px-6 py-4 text-gray-500">
      <%= cat.slug %>
    </td>

    
<%
  const roleStyles = {
    admin: 'from-rose-500 to-pink-500 ring-rose-500/30',
    publisher: 'from-indigo-500 to-violet-500 ring-indigo-500/30',
    author: 'from-emerald-500 to-teal-500 ring-emerald-500/30',
    user: 'from-gray-500 to-slate-500 ring-gray-500/30'
  };
%>

<td class="px-6 py-4">
  <span
    class="inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full
           bg-gradient-to-r <%= roleStyles[cat.createdBy.role] %>
           text-white shadow-sm ring-1
           hover:shadow-md transition"
  >
    <span class="h-1.5 w-1.5 rounded-full bg-white/80"></span>
    <%= cat.createdBy.role.toUpperCase() %>
  </span>
</td>


    <!-- Blog Count -->
    <td class="px-6 py-4">
      <span class="inline-flex items-center gap-1 px-3 py-1 text-xs rounded-full bg-indigo-50 text-indigo-600 font-semibold">
        <%= cat.blogCount || 0 %> Blogs
      </span>
    </td>

    <td class="px-6 py-4 text-gray-500">
      <%= new Date(cat.createdAt).toDateString() %>
    </td>

    <!-- Actions -->
    <td class="px-6 py-4 text-right">
      <div class="inline-flex items-center gap-2">

        <!-- Edit -->
        <button
          type="button"
          data-id="<%= cat._id %>"
          data-name="<%= cat.name %>"
          class="edit-category-btn
                 flex items-center gap-2 px-4 py-1.5
                 text-sm font-semibold text-indigo-700
                 bg-indigo-50 border border-indigo-200
                 rounded-lg
                 hover:bg-indigo-100 hover:border-indigo-300
                 focus:outline-none focus:ring-2 focus:ring-indigo-400
                 transition"
        >
          ‚úèÔ∏è Edit
        </button>

        <!-- Delete -->
        <form
          action="/admins/categories/<%= cat._id %>?_method=DELETE"
          method="POST"
          class="inline"
          onsubmit="return confirm('Are you sure you want to delete this category?')"
        >
          <button
            type="submit"
            class="flex items-center gap-2 px-4 py-1.5
                   text-sm font-semibold text-red-700
                   bg-red-50 border border-red-200
                   rounded-lg
                   hover:bg-red-100 hover:border-red-300
                   focus:outline-none focus:ring-2 focus:ring-red-400
                   transition"
          >
            üóë Delete
          </button>
        </form>

      </div>
    </td>

  </tr>
<% }) %>

  <% } %>

</tbody>

    </table>

    <!-- PAGINATION -->
    <div class="flex items-center justify-between px-6 py-4 border-t text-sm">
      <p class="text-gray-500">
        Page <%= categories.page %> of <%= categories.totalPages %>
      </p>

      <div class="flex gap-2">
        <% if (categories.hasPrevPage) { %>
                                      <a
  href="?page=<%= categories.prevPage %>"
  class="inline-flex items-center px-4 py-2
         text-sm font-medium text-gray-700
         bg-white border border-gray-300
         rounded-lg
         hover:bg-gray-100
         focus:outline-none focus:ring-2 focus:ring-indigo-400
         transition"
>
  ‚Üê Prev
</a>
        <% } %>

        <% if (categories.hasNextPage) { %>
                        <a
  href="?page=<%= categories.nextPage %>"
  class="inline-flex items-center px-4 py-2
         text-sm font-medium text-gray-700
         bg-white border border-gray-300
         rounded-lg
         hover:bg-gray-100
         focus:outline-none focus:ring-2 focus:ring-indigo-400
         transition"
>
  Next ‚Üí
</a>
        <% } %>
      </div>
    </div>
  </div>
</main>



        <!-- FOOTER -->
<footer class="bg-white border-t px-8 py-4 text-sm text-gray-500 flex justify-between">
  <p>¬© <%= new Date().getFullYear() %> AdminPanel</p>
  <p>Logged in as <%= admin.role %></p>
</footer>



      </div>
    </div>
    
    <!-- CREATE CATEGORY MODAL -->
<div
   id="create-category-modal"
  class="modal fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm"
>
  <div
    class="bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 animate-scale-in"
  >
    <!-- HEADER -->
    <div class="flex items-center justify-between mb-5">
      <h3 class="text-lg font-semibold text-gray-800">
        Create New Category
      </h3>
      <button
  data-open-modal="create-category"
  class="bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-sm font-medium shadow
         hover:bg-indigo-700 transition flex items-center gap-2"
>
  <i class="fa-solid fa-tag"></i>
  New Category
</button>
    </div>

    <!-- FORM -->
    <form action="/admins/categories" method="POST" class="space-y-5">

      <!-- INPUT -->
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">
          Category Name
        </label>

        <div class="relative">
          <input
            type="text"
            name="name"
            required
            placeholder="e.g. Technology"
            class="w-full rounded-xl border border-gray-300 bg-white px-4 py-3
                   text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200
                   transition"
          />
          <i class="fa-solid fa-tag absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
      </div>

      <!-- ACTIONS -->
      <div class="flex justify-end gap-3 pt-3">
        <button
          type="button"
          data-close-modal
          class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600
                 hover:bg-gray-100 transition"
        >
          Cancel
        </button>

        <button
          type="submit"
          class="px-5 py-2 rounded-lg bg-indigo-600 text-white
                 hover:bg-indigo-700 transition font-medium"
        >
          Create Category
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Update CATEGORY MODAL -->
<div
   id="editCategoryModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/40"
>
  <div class="bg-white rounded-2xl w-full max-w-md p-6 shadow-xl">

    <h3 class="text-lg font-semibold mb-4">Update Category</h3>

    <form id="editCategoryForm" method="POST" class="space-y-4">
      <input type="hidden" name="_method" value="PUT" />

      <div>
        <label class="text-sm font-medium text-gray-700 mb-1 block">
          Category Name
        </label>
        <input
          id="editCategoryName"
          type="text"
          name="name"
          required
          class="w-full px-4 py-2.5 rounded-xl bg-gray-50 border
                 focus:bg-white focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <div class="flex justify-end gap-3 pt-4">
        <button
          type="button"
          onclick="closeEditModal()"
          class="px-4 py-2 rounded-lg border"
        >
          Cancel
        </button>
        <button
          class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
        >
          Update
        </button>
      </div>
    </form>
  </div>
</div>




<!-- TOAST -->

<script>
  document.addEventListener('DOMContentLoaded', () => {

    // OPEN MODAL
    document.querySelectorAll('[data-open-modal]').forEach(button => {
      button.addEventListener('click', () => {
        const modalKey = button.dataset.openModal;
        const modal = document.getElementById(`${modalKey}-modal`);

        if (!modal) return;

        modal.classList.remove('hidden');
        modal.classList.add('flex');
      });
    });

    // CLOSE MODAL
    document.querySelectorAll('[data-close-modal]').forEach(button => {
      button.addEventListener('click', () => {
        const modal = button.closest('.modal');

        modal.classList.add('hidden');
        modal.classList.remove('flex');
      });
    });

    // CLOSE ON BACKDROP CLICK
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.add('hidden');
          modal.classList.remove('flex');
        }
      });
    });

  });
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {

  const editModal = document.getElementById('editCategoryModal');
  const editForm  = document.getElementById('editCategoryForm');
  const editInput = document.getElementById('editCategoryName');

  // OPEN EDIT MODAL
  document.querySelectorAll('.edit-category-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const id   = btn.dataset.id;
      const name = btn.dataset.name;

      editInput.value = name;
      editForm.action = `/admins/categories/${id}?_method=PUT`;

      editModal.classList.remove('hidden');
      editModal.classList.add('flex');
    });
  });

  // CLOSE MODAL ON BACKDROP
  editModal.addEventListener('click', (e) => {
    if (e.target === editModal) {
      editModal.classList.add('hidden');
      editModal.classList.remove('flex');
    }
  });
});

// CLOSE FUNCTION (used by cancel button)
function closeEditModal() {
  const modal = document.getElementById('editCategoryModal');
  modal.classList.add('hidden');
  modal.classList.remove('flex');
}
</script>
    <%- include('../partials/toast-script.ejs') %>
    <%- include("./components/icon-hover.ejs") %>
    <%- include("./components/back-button.ejs") %>
    <%- include("./components/real-time.ejs") %>
  </body>
</html>
